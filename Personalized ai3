class PersonalizedChatbot:
    def __init__(self):
        self.user_preferences = {}
        self.greetings = ["Hello!", "Hi there!", "Greetings!"]
        self.farewells = ["Goodbye!", "See you later!", "Farewell!"]

    def greet_user(self):
        # A simple form of personalization: remembering the user's name
        if "name" in self.user_preferences:
            print(f"{self.greetings[0]} {self.user_preferences['name']}!")
        else:
            print(self.greetings[0])

    def get_user_input(self, prompt):
        return input(prompt).strip()

    def process_input(self, user_input):
        user_input_lower = user_input.lower()

        if "my name is" in user_input_lower:
            name = user_input_lower.split("my name is")[-1].strip().title()
            self.user_preferences["name"] = name
            return f"Nice to meet you, {name}!"
        elif "how are you" in user_input_lower:
            return "I'm doing well, thank you for asking!"
        elif "favorite color is" in user_input_lower:
            color = user_input_lower.split("favorite color is")[-1].strip()
            self.user_preferences["favorite_color"] = color
            return f"Ah, {color} is a lovely color!"
        elif "what is my name" in user_input_lower:
            if "name" in self.user_preferences:
                return f"Your name is {self.user_preferences['name']}."
            else:
                return "I don't know your name yet."
        elif "what is my favorite color" in user_input_lower:
            if "favorite_color" in self.user_preferences:
                return f"Your favorite color is {self.user_preferences['favorite_color']}."
            else:
                return "I don't know your favorite color yet."
        elif any(farewell_phrase in user_input_lower for farewell_phrase in ["bye", "exit", "quit"]):
            return self.farewells[0]
        else:
            return "I'm not sure how to respond to that."

    def run(self):
        self.greet_user()
        while True:
            user_query = self.get_user_input("You: ")
            response = self.process_input(user_query)
            print(f"AI: {response}")
            if any(farewell_phrase in response.lower() for farewell_phrase in ["goodbye", "see you later", "farewell"]):
                break

if __name__ == "__main__":
    chatbot = PersonalizedChatbot()
    chatbot.run()
